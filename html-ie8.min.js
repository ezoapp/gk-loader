define(["module","./lib/simplehtmlparser.min"],function(t){"use strict";function e(t){return E.parse(t)}function n(t){return function(e){return e.tagName===t}}function r(t,e){m(t,function(t){var n=t.attribs.href;n&&e.deps.push(h(n,e.moduleId+"/../")),t.parentNode.removeChild(t)})}function i(t,e){var n,r=[],i={},o={context:"gk"};if(m(t,function(t){var n=t.attribs.src;n?r.push(h(n,e.moduleId+"/../")):e.script+=t.innerHTML()}),n=r.length,n&&(e.deps.push(r[n-1]),n>1)){for(var u=n-1;u>0;u-=1)i[r[u]]=[r[u-1]];o.shim=i,e.script="requirejs.config("+JSON.stringify(o)+");"+e.script}}function o(t,e){r(t.childNodes.filter(n("link")),e),e.template=t.innerHTML()}function u(t,e){var n="";m(t,function(t){n+=t.innerHTML()}),e.moduleText=H.requireVariables(e.deps)+";"+H.registerElement(e.template)+n}function s(t){return"(function(){"+H.moduleInfo(t.moduleId)+";"+p(t.script)+";define(function("+t.vars.join()+"){"+t.moduleText+"})}());"}function c(t,c){var l=e(t),a=l.childNodes,f=a.filter(n("link")),d=a.filter(n("script")),h=a.filter(n("element")),p=h.length?h[0].childNodes:[],m=p.filter(n("template")),g=p.filter(n("script"));return r(f,c),i(d,c),o(m.length?m[0]:"",c),u(g,c),s(c)}Array.prototype.filter||(Array.prototype.filter=function(t){if(void 0===this||null===this)throw new TypeError;var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError;for(var r=[],i=arguments.length>=2?arguments[1]:void 0,o=0;n>o;o++)if(o in e){var u=e[o];t.call(i,u,o,e)&&r.push(u)}return r}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){if(void 0===this||null===this)throw new TypeError('"this" is null or not defined');var n=this.length>>>0;for(e=+e||0,1/0===Math.abs(e)&&(e=0),0>e&&(e+=n,0>e&&(e=0));n>e;e++)if(this[e]===t)return e;return-1});var l=".html",a=t.config(),f=a.lib,d=f.normalize,h=f.loadUrl,p=f.trimNewline,m=f.each,g=f.$,v=g.gk,y=function(){for(var t=["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],e={},n=0,r=t.length;r>n;n++)e[t[n]]=!0;return e}(),b=new SimpleHtmlParser,N=function(){this.tagName=arguments[0],this.attribs=function(t){var e={};return m(t,function(t){e[t.name]=t.value}),e}(arguments[1]),this.childNodes=[]},T=function(){this.content=arguments[0]},w=function(){},L=N.prototype,k=T.prototype,x=w.prototype;L.removeChild=function(t){var e=this.childNodes.indexOf(t);-1!==e&&this.childNodes.splice(e,1)},L.innerHTML=function(){var t="";return m(this.childNodes,function(e){t+=e.outerHTML()}),t},L.outerHTML=function(){var t=this,e=t.tagName,n="",r="";return m(Object.keys(t.attribs),function(e){n+=" "+e+'="'+t.attribs[e]+'"'}),r="<"+e+n+">"+t.innerHTML(),e.toLowerCase()in y||(r+="</"+e+">"),r},k.innerHTML=k.outerHTML=function(){return this.content},function(){function t(){return[new N("ROOT",[])]}function e(t){return t[t.length-1]}function n(t,e){t.push(e)}function r(t){return t.pop()}function i(t,n,r,i){var o=e(t),u=new N(n,i);return u.parentNode=o,o.childNodes.push(u),u}function o(t,n){var r=e(t),i=new T(n);return i.parentNode=r,r.childNodes.push(i),i}x.parse=function(e){var u=t();return b.parse(e,{startElement:function(t,e,r){var o=i(u,t,e,r);t.toLowerCase()in y||"/>"===e.substr(e.length-2)||n(u,o)},endElement:function(){r(u)},characters:function(t){t=t.trim(),t&&o(u,t)}}),u[0]}}();var E=new w,H={requireVariables:function(t){var e=[];return m(t,function(t){e.push('require("'+t+'")')}),e.join(";")},registerElement:function(t){return"function registerElement(n,c){$.gk.registerElement(n,'"+t+"',c)}"},moduleInfo:function(t){return"var module="+JSON.stringify({id:t})}};return v.registerElement=function(t,e,n){v.registry(t,{template:e,script:function(){for(var t=Object.keys(n||{}),e=0,r=t.length;r>e;e+=1)this[t[e]]=n[t[e]]}})},{load:function(t,e,n){e(["@text!"+t+l],function(e){var r={deps:[],vars:["require","exports","module"],moduleId:t,template:"",moduleText:"",script:""};n.fromText(c(e,r))})},normalize:d,pluginBuilder:"./html-build"}});